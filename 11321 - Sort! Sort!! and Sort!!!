#include <iostream>
#include <string>
#include <iomanip>
#include <cmath>
#include<sstream>
#include<vector>
#include<algorithm>
using namespace std;
int n, m;
bool cmp(int i, int j) {
    if (i % m != j % m) {
        return i % m < j % m;  // 先按餘數排序
    }
    if ((i & 1) && (j & 1)) {
        return i > j;  // 如果兩個都是奇數，則較大的奇數排在前面
    }
    if (!(i & 1) && !(j & 1)) {
        return i < j;  // 如果兩個都是偶數，則較小的偶數排在前面
    } else {
        return i & 1;  // 如果一個是奇數一個是偶數，則奇數排在前面
    }
}
int main()
{
	while (cin >> n >> m) {
		if (n == 0 && m == 0) {
			cout << "0 0" << endl;
			break;
		}
		int number;
		vector<int> nums;
		for (int i = 0; i < n; i++) {
			cin >> number;
			nums.push_back(number);
		}
		cout << n << " " << m << endl;
		sort(nums.begin(), nums.end(), cmp);
		for (auto i = nums.begin(); i != nums.end(); i++) {
			cout << *i << endl;
		}
	}
}
